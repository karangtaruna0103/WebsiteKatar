<!DOCTYPE html>
<html lang="id">
<head>
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta charset="UTF-8">
  <title>Berita Karang Taruna</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f3f4f6;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #2563eb;
      color: white;
      padding: 20px;
      text-align: center;
    }
    .form-container {
      background: white;
      padding: 20px;
      max-width: 600px;
      margin: 20px auto;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }
    input, textarea {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    input[type="file"] {
      padding: 5px;
    }
    .preview-img {
      max-width: 100%;
      height: auto;
      margin-top: 10px;
      border-radius: 8px;
    }
    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
      padding: 20px;
    }
    .news-card {
      background: white;
      width: 90%;
      max-width: 600px;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }
    .news-title {
      font-weight: bold;
      font-size: 18px;
    }
    .news-date {
      font-size: 14px;
      color: #6b7280;
    }
    .news-text {
      margin-top: 10px;
    }
    .btn {
      padding: 6px 12px;
      margin-top: 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      color: white;
    }
    .edit-btn { background-color: #f59e0b; }
    .delete-btn { background-color: #ef4444; margin-left: 10px; }
    .submit-btn { background-color: #10b981; width: 100%; }
    .notif {
      background: #d1fae5;
      color: #065f46;
      border: 1px solid #10b981;
      padding: 10px;
      margin: 0 auto;
      margin-top: 10px;
      max-width: 600px;
      border-radius: 6px;
      text-align: center;
      display: none;
    }
  </style>
</head>
<body>

  <header>
    <h1>Add Berita Karang Taruna Kebon Jeruk</h1>
  </header>

  <div class="form-container">
    <input type="text" id="judul" placeholder="Judul Berita">
    <input type="date" id="tanggal">
    <textarea id="isi" rows="4" placeholder="Isi berita..."></textarea>
    <input type="file" id="gambar" accept="image/*" onchange="previewGambar(event)">
    <img id="preview" class="preview-img" style="display:none;">
    <button class="btn submit-btn" onclick="tambahBerita()">Tambah Berita</button>
  </div>

  <div id="notif" class="notif">Berita berhasil disimpan!</div>

  <div class="container" id="beritaContainer"></div>

  <script>
    let gambarBase64 = "";

    function simpanData(data) {
      localStorage.setItem('newsKarangTaruna', JSON.stringify(data));
    }

    function ambilData() {
      return JSON.parse(localStorage.getItem('newsKarangTaruna')) || [];
    }

    function tampilkanNotif(pesan) {
      const notif = document.getElementById("notif");
      notif.textContent = pesan;
      notif.style.display = "block";
      setTimeout(() => notif.style.display = "none", 2000);
    }

    function previewGambar(event) {
      const file = event.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function(e) {
        gambarBase64 = e.target.result;
        const img = document.getElementById("preview");
        img.src = gambarBase64;
        img.style.display = "block";
      };
      reader.readAsDataURL(file);
    }

    function tampilkanBerita() {
      const container = document.getElementById('beritaContainer');
      container.innerHTML = '';
      const berita = ambilData();

      berita.forEach((item, index) => {
        const card = document.createElement('div');
        card.className = 'news-card';
        card.innerHTML = `
          <div class="news-title">${item.judul}</div>
          <div class="news-date">${item.tanggal}</div>
          ${item.gambar ? `<img src="${item.gambar}" class="preview-img">` : ""}
          <div class="news-text">${item.isi}</div>
          <button class="btn edit-btn" onclick="editBerita(${index})">Edit</button>
          <button class="btn delete-btn" onclick="hapusBerita(${index})">Hapus</button>
        `;
        container.appendChild(card);
      });
    }

    function tambahBerita() {
      const judul = document.getElementById('judul').value;
      const tanggal = document.getElementById('tanggal').value;
      const isi = document.getElementById('isi').value;

      if (!judul || !tanggal || !isi) {
        alert("Mohon isi semua kolom!");
        return;
      }

      const berita = ambilData();
      berita.push({ judul, tanggal, isi, gambar: gambarBase64 });
      simpanData(berita);
      tampilkanBerita();
      tampilkanNotif("Berita berhasil ditambahkan.");

      // Reset form
      document.getElementById('judul').value = '';
      document.getElementById('tanggal').value = '';
      document.getElementById('isi').value = '';
      document.getElementById('gambar').value = '';
      document.getElementById('preview').style.display = 'none';
      gambarBase64 = "";
    }

    function editBerita(index) {
      const berita = ambilData();
      const item = berita[index];

      const judulBaru = prompt("Edit Judul:", item.judul);
      const tanggalBaru = prompt("Edit Tanggal:", item.tanggal);
      const isiBaru = prompt("Edit Isi:", item.isi);

      if (judulBaru && tanggalBaru && isiBaru) {
        berita[index].judul = judulBaru;
        berita[index].tanggal = tanggalBaru;
        berita[index].isi = isiBaru;
        simpanData(berita);
        tampilkanBerita();
        tampilkanNotif("Berita berhasil diedit.");
      }
    }

    function hapusBerita(index) {
      if (!confirm("Yakin ingin menghapus berita ini?")) return;
      const berita = ambilData();
      berita.splice(index, 1);
      simpanData(berita);
      tampilkanBerita();
      tampilkanNotif("Berita berhasil dihapus.");
    }

    tampilkanBerita();
  </script>
<style>
    .back-button {
      padding: 10px 18px;
      background-color: #6b7280;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      margin: 20px;
    }
    .back-button:hover {
      background-color: #4b5563;
    }
  </style>

  <button class="back-button" onclick="goBack()">‚Üê Kembali</button>

  <script>
    function goBack() {
      window.history.back();
    }
  </script>
</body>
</html>
